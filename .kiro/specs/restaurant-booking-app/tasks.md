# План реализации кроссплатформенного приложения бронирования столиков

- [x] 1. Настройка проекта и базовой инфраструктуры




















  - Создать Flutter проект с необходимыми зависимостями (riverpod, go_router, dio, hive)
  - Настроить структуру папок согласно Clean Architecture
  - Создать базовые модели данных и интерфейсы репозиториев
  - Настроить DI контейнер с get_it
  - _Требования: 1.1, 2.1, 3.1_

- [ ] 2. Реализация системы аутентификации


  - [ ] 2.1 Создать модели и интерфейсы для аутентификации



    - Написать User, AuthState, AuthResult модели
    - Создать AuthRepository интерфейс с методами login/logout/refresh
    - Реализовать AuthProvider для управления состоянием
    - _Требования: 1.1, 1.2_

  - [x] 2.2 Реализовать вход по телефону с SMS




    - Создать экраны ввода телефона и OTP кода
    - Реализовать HTTP клиент для отправки SMS и верификации
    - Добавить валидацию номера телефона и OTP
    - Написать unit тесты для SMS аутентификации
    - _Требования: 1.1, 1.2_

  - [ ] 2.3 Реализовать вход по email и паролю




    - Создать экран входа с полями email/пароль
    - Реализовать валидацию email и пароля
    - Добавить функцию восстановления пароля
    - Написать тесты для email аутентификации
    - _Требования: 1.3_

  - [ ] 2.4 Добавить поддержку социальных сетей
    - Интегрировать OAuth для VK, Яндекс, Telegram
    - Создать универсальный обработчик социальной аутентификации
    - Реализовать связывание аккаунтов
    - _Требования: 1.4_

- [ ] 3. Создание системы поиска и каталога заведений
  - [ ] 3.1 Реализовать модели заведений и поиска
    - Создать Venue, SearchFilters, Category модели
    - Реализовать VenueRepository с методами поиска
    - Добавить сериализацию/десериализацию JSON
    - _Требования: 2.1, 2.2_

  - [ ] 3.2 Создать экраны каталога и поиска
    - Реализовать главный экран с поисковой строкой
    - Создать экран каталога со списком и картой
    - Добавить фильтры по категориям, кухне, расстоянию
    - Реализовать переключение между списком и картой
    - _Требования: 2.2, 2.3, 8.1_

  - [ ] 3.3 Интегрировать карты и геолокацию
    - Подключить Яндекс.Карты SDK
    - Реализовать отображение заведений на карте
    - Добавить определение местоположения пользователя
    - Создать навигацию к заведению
    - _Требования: 8.1, 8.2, 8.3_

  - [ ] 3.4 Реализовать страницу заведения
    - Создать детальную карточку заведения с фото
    - Отобразить информацию о часах работы, контактах
    - Добавить просмотр меню и отзывов
    - Реализовать кнопку "В избранное"
    - _Требования: 2.3, 5.4_

- [ ] 4. Система бронирования столиков
  - [ ] 4.1 Создать модели бронирования
    - Реализовать Reservation, TimeSlot, Table модели
    - Создать BookingRepository интерфейс
    - Добавить валидацию данных бронирования
    - _Требования: 3.1, 3.2_

  - [ ] 4.2 Реализовать форму бронирования
    - Создать экран выбора даты, времени и количества гостей
    - Добавить выбор типа столика и комментарии
    - Реализовать отображение доступных слотов
    - Добавить валидацию формы бронирования
    - _Требования: 3.1, 3.2, 3.3_

  - [ ] 4.3 Создать систему предзаказа блюд
    - Реализовать MenuItem, PreorderItem модели
    - Создать экран предзаказа с меню заведения
    - Добавить корзину с возможностью изменения количества
    - Реализовать расчет итоговой суммы
    - _Требования: 3.4_

  - [ ] 4.4 Интегрировать оплату предзаказа
    - Подключить платежные провайдеры (СБП, карты)
    - Реализовать экран выбора способа оплаты
    - Добавить обработку результатов платежа
    - Создать экран подтверждения бронирования
    - _Требования: 3.5, 7.1, 7.2_

- [ ] 5. Кроссплатформенная адаптация
  - [ ] 5.1 Реализовать адаптивный дизайн
    - Создать responsive layout для различных размеров экранов
    - Реализовать адаптивную навигацию (drawer для мобильных, sidebar для десктопа)
    - Добавить платформо-специфичные UI элементы
    - Настроить различные breakpoints для планшетов и десктопов
    - _Требования: 12.3, 12.5_

  - [ ] 5.2 Настроить Web-специфичные функции
    - Реализовать URL маршрутизацию с go_router для Web
    - Добавить поддержку browser history и deep linking
    - Интегрировать Web API для геолокации и камеры
    - Настроить PWA с service worker для оффлайн работы
    - _Требования: 12.6, 12.7_

  - [ ] 5.3 Адаптировать карты для Web
    - Интегрировать Яндекс.Карты JavaScript API для Web версии
    - Сохранить нативные SDK для мобильных платформ
    - Создать единый интерфейс для работы с картами
    - Добавить fallback для браузеров без поддержки геолокации
    - _Требования: 8.1, 12.6_

- [ ] 6. Система QR-оплаты
  - [ ] 6.1 Реализовать кроссплатформенный QR-сканер
    - Интегрировать mobile_scanner для мобильных платформ
    - Реализовать Web-версию сканера через getUserMedia API
    - Создать экран сканера с подсветкой и фонариком (мобильные)
    - Добавить обработку QR-токенов столиков
    - Реализовать fallback для ручного ввода кода на всех платформах
    - _Требования: 4.1, 12.6_

  - [ ] 6.2 Создать систему оплаты по QR
    - Реализовать получение счета по QR-токену
    - Создать экран просмотра счета с позициями
    - Добавить возможность добавления блюд к счету
    - Реализовать разделение счета и чаевые
    - _Требования: 4.2, 4.3, 4.4_

  - [ ] 6.3 Интегрировать платежи и чеки
    - Реализовать оплату через СБП и карты
    - Добавить формирование фискальных чеков (54-ФЗ)
    - Создать экран успешной оплаты с чеком
    - Добавить отправку чека на email/SMS
    - _Требования: 4.5, 7.4, 7.5_

- [ ] 7. Профиль пользователя и история
  - [ ] 7.1 Создать экран профиля
    - Реализовать отображение данных пользователя
    - Добавить возможность редактирования профиля
    - Создать экран загрузки и обрезки аватара
    - Отобразить рейтинг пользователя
    - _Требования: 5.1_

  - [ ] 7.2 Реализовать историю бронирований
    - Создать экран списка всех бронирований
    - Добавить фильтры по статусу и дате
    - Реализовать возможность отмены бронирования
    - Показать детали каждого бронирования
    - _Требования: 5.2_

  - [ ] 7.3 Создать историю расходов
    - Реализовать экран со всеми платежами
    - Добавить группировку по периодам
    - Создать функцию экспорта в PDF/Excel
    - Добавить графики трат по месяцам
    - _Требования: 5.3_

  - [ ] 7.4 Реализовать избранное
    - Создать экран списка избранных заведений
    - Добавить возможность удаления из избранного
    - Реализовать сортировку по расстоянию/рейтингу
    - Синхронизировать избранное между устройствами
    - _Требования: 5.4_

- [ ] 8. Система отзывов и рейтингов
  - [ ] 7.1 Создать модели отзывов
    - Реализовать Review, Rating модели
    - Создать ReviewRepository интерфейс
    - Добавить валидацию отзывов и фото
    - _Требования: 6.1, 6.2_

  - [ ] 7.2 Реализовать создание отзывов
    - Создать экран написания отзыва с рейтингом
    - Добавить возможность загрузки фотографий
    - Реализовать оценку отдельных блюд
    - Добавить предварительный просмотр отзыва
    - _Требования: 6.2_

  - [ ] 7.3 Создать систему модерации
    - Реализовать автоматическую проверку контента
    - Добавить ручную модерацию фотографий
    - Создать систему жалоб на отзывы
    - Реализовать скрытие неподходящего контента
    - _Требования: 6.3, 12.3_

  - [ ] 7.4 Интегрировать рейтинговую систему
    - Реализовать расчет рейтинга пользователей
    - Добавить влияние no-show на рейтинг
    - Создать систему поощрений за хорошее поведение
    - Показать рейтинг заведениям при бронировании
    - _Требования: 6.4, 6.5_

- [ ] 9. Система уведомлений
  - [ ] 8.1 Настроить push-уведомления
    - Интегрировать Firebase Cloud Messaging
    - Создать сервис для отправки уведомлений
    - Реализовать обработку уведомлений в приложении
    - Добавить группировку и action-кнопки
    - _Требования: 9.1, 9.2_

  - [ ] 8.2 Реализовать SMS и email уведомления
    - Интегрировать SMS провайдера
    - Создать email сервис для чеков и подтверждений
    - Реализовать шаблоны уведомлений
    - Добавить настройки частоты уведомлений
    - _Требования: 9.1, 9.4_

  - [ ] 8.3 Создать настройки уведомлений
    - Реализовать экран настроек уведомлений
    - Добавить "тихие часы" для пользователей
    - Создать возможность отключения типов уведомлений
    - Реализовать синхронизацию настроек
    - _Требования: 9.5_

- [ ] 10. Программы лояльности и промокоды
  - [ ] 9.1 Создать систему бонусов
    - Реализовать модели бонусных баллов
    - Создать правила начисления и списания
    - Добавить отображение баланса в профиле
    - Реализовать историю операций с бонусами
    - _Требования: 10.1_

  - [ ] 9.2 Реализовать промокоды
    - Создать систему применения промокодов
    - Добавить валидацию и проверку сроков действия
    - Реализовать различные типы скидок
    - Интегрировать с партнерскими программами
    - _Требования: 10.2, 10.4_

  - [ ] 9.3 Создать персональные акции
    - Реализовать систему персонализированных предложений
    - Добавить push-уведомления об акциях
    - Создать экран активных предложений
    - Интегрировать с аналитикой поведения
    - _Требования: 10.3_

- [ ] 11. Функции для заведений (админ панель)
  - [ ] 10.1 Создать систему управления бронированиями
    - Реализовать интерфейс просмотра бронирований
    - Добавить возможность подтверждения/отклонения
    - Создать календарь загруженности
    - Реализовать настройки правил бронирования
    - _Требования: 11.1, 11.3_

  - [ ] 10.2 Реализовать управление меню
    - Создать интерфейс редактирования меню
    - Добавить загрузку фотографий блюд
    - Реализовать управление наличием позиций
    - Создать систему модификаторов и добавок
    - _Требования: 11.2_

  - [ ] 10.3 Добавить аналитику для заведений
    - Реализовать дашборд с ключевыми метриками
    - Создать отчеты по выручке и посещаемости
    - Добавить анализ no-show и отмен
    - Реализовать экспорт отчетов
    - _Требования: 11.4_

- [ ] 12. Безопасность и соответствие законодательству
  - [ ] 11.1 Реализовать защиту данных
    - Добавить шифрование персональных данных
    - Реализовать безопасное хранение паролей
    - Создать систему аудита действий
    - Добавить защиту от SQL-инъекций
    - _Требования: 12.2, 12.5_

  - [ ] 11.2 Интегрировать фискализацию 54-ФЗ
    - Подключить АТОЛ Онлайн или Evotor API
    - Реализовать формирование фискальных чеков
    - Добавить отправку чеков в ОФД
    - Создать систему хранения чеков
    - _Требования: 12.4, 7.5_

  - [ ] 11.3 Обеспечить соответствие ФЗ-152
    - Реализовать хранение данных в РФ
    - Добавить согласия на обработку ПДн
    - Создать возможность удаления данных
    - Реализовать экспорт персональных данных
    - _Требования: 12.1, 12.5_

- [ ] 13. Тестирование и оптимизация
  - [ ] 12.1 Написать unit тесты
    - Создать тесты для всех моделей данных
    - Добавить тесты для бизнес-логики
    - Реализовать тесты для репозиториев с моками
    - Достичь покрытия кода не менее 80%
    - _Требования: все основные требования_

  - [ ] 12.2 Создать integration тесты
    - Написать тесты для API интеграций
    - Добавить тесты для платежных операций
    - Создать тесты для потоков данных
    - Реализовать тесты для уведомлений
    - _Требования: все основные требования_

  - [ ] 12.3 Реализовать widget тесты
    - Создать тесты для всех экранов
    - Добавить тесты для пользовательских взаимодействий
    - Реализовать тесты для навигации
    - Создать тесты для анимаций
    - _Требования: все основные требования_

  - [ ] 12.4 Провести оптимизацию производительности
    - Оптимизировать загрузку изображений
    - Добавить lazy loading для списков
    - Реализовать кэширование данных
    - Оптимизировать анимации для 60 FPS
    - _Требования: все основные требования_

- [ ] 14. Подготовка к релизу
  - [ ] 13.1 Настроить аналитику и мониторинг
    - Интегрировать Яндекс AppMetrica
    - Добавить VK myTracker для когорт
    - Настроить Sentry для отслеживания ошибок
    - Создать дашборды мониторинга
    - _Требования: все основные требования_

  - [ ] 14.2 Подготовить сборки для всех платформ
    - Настроить CI/CD пайплайны для iOS, Android и Web
    - Создать релизные конфигурации для всех платформ
    - Добавить обфускацию кода для мобильных приложений
    - Подготовить метаданные для App Store и Google Play
    - Настроить Web hosting и CDN для веб-версии
    - Оптимизировать Web bundle (tree shaking, code splitting)
    - _Требования: все основные требования_

  - [ ] 13.3 Провести финальное тестирование
    - Выполнить E2E тестирование на реальных устройствах
    - Провести нагрузочное тестирование
    - Выполнить тестирование безопасности
    - Провести пользовательское тестирование
    - _Требования: все основные требования_